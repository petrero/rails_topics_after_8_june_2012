<h1>Products</h1>

<%= search_form_for @search do |f| %>
	<%= f.condition_fields do |c| %>
		<div class="field">
			<%# on each of the condition i call attribute_fields %>
			<%= c.attribute_fields do |a| %>
				<%# for each of the attribute i call attribute_select 
					which will display a list of attributes on the product model 
				%>
				<%= a.attribute_select %>
			<% end %>
			<%= c.predicate_select %> <%#will determine how that given attribute is searched by %>
			<%= c.value_fields do |v| %>
				<%= v.text_field :value %>
			<% end %>
		</div>	
	<% end %>
	<div class="actions"><%=f.submit "Search"%></div>
<% end %>

<table id="products">
  <tr>
    <th><%= sort_link @search, :name, "Product Name" %></th>
    <th><%= sort_link @search, :released_on, "Release Date" %></th>
    <th><%= sort_link @search, :price, "Price" %></th>
  </tr>
<% @products.each do |product| %>
  <tr>
    <td><%= link_to(product.name, product) %></td>
    <td><%= product.released_on.strftime("%B %e, %Y") %></td>
    <td><%= number_to_currency(product.price) %></td>
  </tr>
<% end %>
</table>
